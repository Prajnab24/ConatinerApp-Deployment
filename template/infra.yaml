steps:
- task: AzureCLI@2
  displayName: Azure CLI
  inputs:
    azureSubscription: 'azure-connection'
    scriptType: 'bash'
    scriptLocation: inlineScript
    inlineScript: |
      az --version
      az account show

- script: |
    pwd
    cd terraform
    pwd
    terraform init
    terraform validate
  displayName: 'Terraform Init and Validate'
 
- script: |
    pwd
    cd terraform
    pwd
    terraform plan
  displayName: 'Terraform Plan'
 
- script: |
    pwd
    cd terraform
    pwd
    terraform apply  -auto-approve
  displayName: 'Terraform Apply'
  condition: succeeded()



